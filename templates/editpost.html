{% extends "base.html" %}

{# if there are form errors, re-render form, or display post #}
{% set title = p.title %}
{% set body = p.body %}
{% if errors %}
    {% if errors.title %}
        {% set title = '' %}
    {% endif %}
    {% if errors.body %}
        {% set body = '' %}
    {% endif %}
{% endif %}

{% block body %}
<h1>{{ page_title }}</h1>

{% if msg %}
    {{ msg }}
{% endif %}

<a href="{{ post_uri }}">View Post</a>

<form method="POST">
    <label>
        <div>Title</div>
        <input type="text" name="title" value="{{ title }}">
        {% if errors and errors.title %}
            {{ errors.title }}
        {% endif %}
    </label>

    <label>
        <div>Body</div>
        <textarea name="body">{{ body }}</textarea>
        {% if errors and errors.body %}
            {{ errors.body }}
        {% endif %}
    </label>

    <div>
        <input type="submit">
    </div>
</form>

{% endblock %}
