{% extends "base.html" %}

{% block body %}
<h1>{{ page_title }}</h1>

<div class="post">
    {% if can_edit %}
    <div>
        <form action="{{ edit_url }}" method="get">
            <input type="hidden" name="post_id" value="{{ p.key.id() }}">
            <input type="submit" value="Edit">
        </form>
    </div>
    {% endif %}
    <pre class="post-body">
        {{ p.body }}
    </pre>

    {% if can_like %}
    <div>
        <form method="post">
            <input type="hidden" name="action" value="like">
            <input type="submit" value="Like">
        </form>
    </div>
    {% endif %}
    {% if liked_post %}
        <div>
            You liked this post
        </div>
        <div>
            <form method="post">
                <input type="hidden" name="action" value="unlike">
                <input type="submit" value="Unlike">
            </form>
        </div>
    {% endif %}

    <div class="comments">
        <!-- TODO: list comments, or say no comments -->
        {% for c in p.comments %}
        <div class="comment">
            <div class="comment-body">
                {{ c.body }}
            </div>
            <div class="comment-author">
                {{ c.author }}
            </div>
        </div>
        {% endfor %}
        <!-- TODO: form to create a new comment -->
    </div>

    {% if can_comment %}
    <div class="comment-form">
        <form method="post">
            <label>
                <div>Comment</div>
                <textarea name="comment_form_body">{{ comment_form_body }}</textarea>
                {% if comment_errors and comment_errors.body %}
                    {{ comment_errors.body }}
                {% endif %}
            </label>

            <input type="hidden" name="action" value="comment">

            <div>
                <input type="submit">
            </div>
        </form>
    </div>
    {% endif %}
</div>

{% endblock %}
